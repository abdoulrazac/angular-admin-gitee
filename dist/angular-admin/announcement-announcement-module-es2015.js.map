{"version":3,"sources":["/./src/app/pages/announcement/announcement.component.html","/./src/app/pages/announcement/announcement.component.ts","/./src/app/pages/announcement/announcement.module.ts","/./src/app/pages/announcement/announcement.routing.ts","/./src/app/pages/announcement/announcement.scss"],"names":[],"mappings":";;;;;;;;;AAAA,6hCAA6hC,qBAAqB,+WAA+W,oCAAoC,sDAAsD,MAAM,ikBAAikB,sCAAsC,yKAAyK,GAAG,oBAAoB,yJAAyJ,4CAA4C,sLAAsL,GAAG,oBAAoB,yJAAyJ,wCAAwC,6KAA6K,GAAG,oBAAoB,yEAAyE,MAAM,u+EAAu+E,gZAAgZ,+JAA+J,gDAAgD,sbAAsb,2CAA2C,mBAAmB,mZAAmZ,gEAAgE,yCAAyC,MAAM,mrEAAmrE,qUAAqU,oCAAoC,gQAAgQ,MAAM,yK;;;;;;;;;;;;ACA5+T;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;GAIG;;AAEyB;AACK;AACc;AACA;AACiC;AACK;AACd;AAElB;AAOlB;AAcnC,IAAK,QAAiB;AAAtB,WAAK,QAAQ;IAAG,uCAAI;AAAC,CAAC,EAAjB,QAAQ,KAAR,QAAQ,QAAS;AAEtB,MAAM,iBAAiB,GAAG;IACxB,OAAO,EAAE,EAAE;IACX,KAAK,EAAE,kEAAa,CAAC,SAAS;CAC/B,CAAC;AAEF,MAAM,mBAAmB,GAAG;IAC1B,OAAO,EAAE,EAAE;CACZ,CAAC;AAQF,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;IA2BhC,YAAoB,EAAe,EAAU,WAAmC;QAA5D,OAAE,GAAF,EAAE,CAAa;QAAU,gBAAW,GAAX,WAAW,CAAwB;QAzBxE,YAAO,GAAG,QAAQ,CAAC;QACnB,iBAAY,GAAG,kEAAa,CAAC;QAC7B,sBAAiB,GAAG,8EAAqB,CAAC;QAC1C,YAAO,GAAa,+DAAqB,CAAC;QAWlD,KAAK;QACE,uBAAkB,GAAkB,IAAI,CAAC;QACzC,2BAAsB,GAAiB,KAAK,CAAC;QAC7C,0BAAqB,GAAiB,EAAE,CAAC;QACzC,iBAAY,GAAkB,kEAAa,CAAC,GAAG,CAAC;QAChD,aAAQ,GAAc,EAAE,CAAC;QACzB,kBAAa,GAA0B;YAC5C,IAAI,EAAE,EAAE;YACR,UAAU,EAAE,IAAI;SACjB,CAAC;QAIA,OAAO;QACP,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAC5B,OAAO,EAAE,CAAC,iBAAiB,CAAC,OAAO,EAAE,yDAAU,CAAC,OAAO,CAAC,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC/E,KAAK,EAAE,CAAC,iBAAiB,CAAC,KAAK,EAAE,yDAAU,CAAC,OAAO,CAAC,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;SAC5E,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAC9B,OAAO,EAAE,CAAC,mBAAmB,CAAC,OAAO,EAAE,yDAAU,CAAC,OAAO,CAAC,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;SAClF,CAAC,CAAC;QAEH,4FAA2B,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjD,4FAA2B,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IACrD,CAAC;IAED,QAAQ;QACN,6CAAM,CAAC,UAAU,CAAC;YAChB,QAAQ,EAAE,IAAI,6CAAM,CAAC,QAAQ,EAAE;YAC/B,GAAG,EAAE,IAAI;YACT,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,KAAK;YACb,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,IAAI;YAChB,WAAW,EAAE,KAAK;SACnB,CAAC,CAAC;QACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,SAAS;IACT,IAAI,gBAAgB;QAClB,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC;QACjD,OAAO,UAAU,IAAI,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,cAAc;IACP,aAAa,CAAC,OAAe;QAClC,OAAO,6CAAM,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC;IAED,SAAS;IACF,OAAO,CAAC,KAAoB;QACjC,OAAO,IAAI,CAAC,YAAY,KAAK,KAAK,CAAC;IACrC,CAAC;IAED,SAAS;IACF,WAAW,CAAC,KAAoB;QACrC,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,EAAE;YAC/B,OAAO;SACR;QACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,SAAS;IACF,aAAa;QAClB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACvC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,OAAO;IACA,eAAe;QACpB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;IAC7C,CAAC;IAED,OAAO;IACA,gBAAgB,CAAC,YAA2B;QACjD,IAAI,CAAC,kBAAkB,GAAG,gDAAgB,CAAC,YAAY,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IACpC,CAAC;IAED,OAAO;IACA,cAAc,CAAC,YAA2B;QAC/C,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;YACvB,IAAI,CAAC,kBAAkB;gBACrB,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;gBACpC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;SACxC;IACH,CAAC;IAED,OAAO;IACA,gBAAgB;QACrB,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE;YACzB,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACzB;IACH,CAAC;IAED,SAAS;IACF,YAAY,CAAC,YAAY;QAC9B,IAAI,CAAC,kBAAkB,GAAG,gDAAgB,CAAC,YAAY,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,SAAS;IACF,eAAe;QACpB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAED,WAAW;IACJ,iBAAiB;QACtB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,OAAO;IACA,uBAAuB,CAAC,QAAiB;QAC9C,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;QACrC,MAAM,WAAW,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC/C,IAAI,CAAC,qBAAqB,GAAG,wFAAuB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC;IACxF,CAAC;IAED,OAAO;IACA,sBAAsB;QAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;QACrC,MAAM,WAAW,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC/C,MAAM,MAAM,GAAG,uFAAsB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;QAC7D,IAAI,CAAC,sBAAsB,GAAG,MAAM,CAAC,GAAG,CAAC;QACzC,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,WAAW,CAAC;IAClD,CAAC;IAED,SAAS;IACF,iBAAiB,CAAC,KAAU;QACjC,IAAI,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;IAC9C,CAAC;IAED,KAAK;IACE,oBAAoB;QACzB,IAAI,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,CAAC;IAC9E,CAAC;IAED,OAAO;IACA,gBAAgB,CAAC,SAAyB,EAAE;QAEjD,KAAK;QACL,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YACtB,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;SACrC;QAED,QAAQ;QACR,IAAI,IAAI,CAAC,YAAY,KAAK,kEAAa,CAAC,GAAG,EAAE;YAC3C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC;SAClC;QAED,OAAO,iFAAgB,CACrB,IAAI,CAAC,QAAQ,EACb,QAAQ,CAAC,IAAI,EACb,IAAI,CAAC,WAAW;aACb,GAAG,CAAwB,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;aAChD,IAAI,CAAC,aAAa,CAAC,EAAE;YACpB,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC,MAAM,CAAC;YAC1C,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;YAChC,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACtC,CAAC,CAAC,CACL,CAAC;IACJ,CAAC;IAED,OAAO;IACA,eAAe,CAAC,YAA2B;QAChD,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAgB,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;aACpE,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,OAAO;IACA,eAAe,CAAC,YAA2B;QAChD,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CACzB,GAAG,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,EAChD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,YAAY,CAAC,CACrD;aACA,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,OAAO;IACA,iBAAiB;QACtB,IAAI,CAAC,WAAW;aACf,MAAM,CAAgB,GAAG,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC;aACvE,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAC/B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC9B,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,CAAC,EAAE;YACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,OAAO;IACA,kBAAkB;QACvB,IAAI,CAAC,WAAW;aACf,MAAM,CAAM,IAAI,CAAC,OAAO,EAAE,EAAE,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC3E,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;QAClC,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,CAAC,EAAE;YACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;CACF;;YA/MyB,0DAAW;YAAuB,oEAAsB;;AApBtC;IAAzC,+DAAS,CAAC,UAAU,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;oEAAW,4DAAc;uDAAC;AAPxD,qBAAqB;IANjC,+DAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,aAAa,EAAE,+DAAiB,CAAC,IAAI;QAErC,4KAA4C;;KAC7C,CAAC;2EA4BwB,0DAAW,EAAuB,oEAAsB;GA3BrE,qBAAqB,CA0OjC;AA1OiC;;;;;;;;;;;;;ACpDlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;GAIG;;AAEsC;AACM;AACmB;AACc;AACrC;AAEM;AACgB;AAkBjE,IAAqB,kBAAkB,GAAvC,MAAqB,kBAAkB;CAAG;AAArB,kBAAkB;IAhBtC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,kEAAmB;YACnB,8DAAgB,CAAC,OAAO,EAAE;YAC1B,8DAAgB,CAAC,OAAO,EAAE;YAC1B,yDAAW,CAAC,OAAO,EAAE;YACrB,0DAAW;YACX,uDAAQ;YACR,6DAAO;SACR;QACD,SAAS,EAAE,EAAE;QACb,YAAY,EAAE;YACZ,6EAAqB;SACtB;KACF,CAAC;GACmB,kBAAkB,CAAG;AAArB,iFAAkB;;;;;;;;;;;;;AC/BvC;AAAA;AAAA;AAAA;AAAA;;;;GAIG;AAEoD;AACU;AAEjE,MAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,6EAAqB,EAAE;CAC/C,CAAC;AAEK,MAAM,OAAO,GAAG,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;;;;;;;;;;;;ACbrD,4DAA4D,eAAe,GAAG,6dAA6d,kBAAkB,GAAG,4DAA4D,gBAAgB,GAAG,sBAAsB,uBAAuB,GAAG,sCAAsC,qBAAqB,sBAAsB,GAAG,4CAA4C,kBAAkB,GAAG,kCAAkC,qBAAqB,GAAG,2CAA2C,0BAA0B,qBAAqB,GAAG,6CAA6C,cAAc,GAAG,+CAA+C,mBAAmB,kBAAkB,GAAG,6CAA6C,+4G","file":"announcement-announcement-module-es2015.js","sourcesContent":["module.exports = \"<div class=\\\"row\\\">\\n  <div class=\\\"col-md-4 col-xs-12\\\">\\n    <sa-card title=\\\"添加公告\\\">\\n      <form\\n        class=\\\"announcement-form\\\"\\n        [formGroup]=\\\"editForm\\\" \\n        (ngSubmit)=\\\"submitEditForm(editForm.value)\\\"\\n      >\\n        <div class=\\\"form-group\\\" [ngClass]=\\\"controlStateClass(state)\\\">\\n          <label for=\\\"announcement-type\\\">\\n            <h5>公告状态</h5>\\n          </label>\\n          <select class=\\\"form-control c-select\\\" id=\\\"announcement-type\\\" [formControl]=\\\"state\\\">\\n            <option [ngValue]=\\\"PublishState.Published\\\">已发布</option>\\n            <option [ngValue]=\\\"PublishState.Draft\\\">草稿</option>\\n          </select>\\n        </div>\\n        <div  class=\\\"form-group\\\" [ngClass]=\\\"controlStateClass(content)\\\">\\n          <label for=\\\"announcement-content\\\">\\n            <h5>公告内容</h5>\\n          </label>\\n          <sa-markdown-editor\\n            id=\\\"announcement-content\\\"\\n            class=\\\"form-control announcement-content\\\" \\n            title=\\\"文章内容\\\"\\n            [config]=\\\"{ lineWrapping: true }\\\"\\n            [formControl]=\\\"content\\\">\\n          </sa-markdown-editor>\\n        </div>\\n        <hr>\\n        <div class=\\\"col-sm-12\\\">\\n          <button\\n            type=\\\"submit\\\"\\n            class=\\\"btn btn-success btn-with-icon\\\"\\n            [disabled]=\\\"!editForm.valid\\\"\\n          >\\n            <i class=\\\"ion-md-done-all\\\"></i>\\n            <span>{{ activeAnnouncement ? '修改' : '添加' }}公告</span>\\n          </button>\\n          <span>&nbsp;&nbsp;</span>\\n          <button class=\\\"btn btn-default btn-with-icon\\\" (click)=\\\"resetEditForm()\\\">\\n            <i class=\\\"ion-md-refresh\\\"></i>\\n            <span>重置</span>\\n          </button>\\n        </div>\\n      </form>\\n    </sa-card>\\n  </div>\\n  <div class=\\\"col-md-8 col-xs-12\\\">\\n    <sa-card title=\\\"全部公告\\\" baCardClass=\\\"with-scroll\\\">\\n      <div class=\\\"clearfix\\\">\\n        <div class=\\\"pull-left\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button\\n              type=\\\"button\\\"\\n              class=\\\"btn btn-default active\\\"\\n              [ngClass]=\\\"{ 'active': isState(PublishState.All) }\\\"\\n              (click)=\\\"switchState(PublishState.All)\\\"\\n            >\\n              <span>全部</span>\\n              <span *ngIf=\\\"isState(PublishState.All)\\\">&nbsp;({{ currentListTotal }})</span>\\n            </button>\\n            <button\\n              type=\\\"button\\\"\\n              class=\\\"btn btn-default\\\"\\n              [ngClass]=\\\"{ 'active': isState(PublishState.Published) }\\\"\\n              (click)=\\\"switchState(PublishState.Published)\\\"\\n            >\\n              <span>已发布</span>\\n              <span *ngIf=\\\"isState(PublishState.Published)\\\">&nbsp;({{ currentListTotal }})</span>\\n            </button>\\n            <button\\n              type=\\\"button\\\"\\n              class=\\\"btn btn-default\\\"\\n              [ngClass]=\\\"{ 'active': isState(PublishState.Draft) }\\\"\\n              (click)=\\\"switchState(PublishState.Draft)\\\"\\n            >\\n              <span>草稿</span>\\n              <span *ngIf=\\\"isState(PublishState.Draft)\\\">&nbsp;({{ currentListTotal }})</span>\\n            </button>\\n          </div>\\n          <span>&nbsp;&nbsp;</span>\\n          <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n            <button\\n              type=\\\"button\\\" \\n              class=\\\"btn btn-default btn-with-icon\\\" \\n              (click)=\\\"refreshAnnouncements()\\\"\\n            >\\n              <i class=\\\"ion-md-refresh\\\"></i>\\n              <span>刷新</span>\\n            </button>\\n            <button\\n              type=\\\"button\\\" \\n              class=\\\"btn btn-default btn-with-icon\\\"\\n              (click)=\\\"resetSearchForm()\\\"\\n            >\\n              <i class=\\\"ion-md-trash\\\"></i>\\n              <span>清空关键词</span>\\n            </button>\\n            <div class=\\\"btn-group\\\" dropdown [isDisabled]=\\\"!selectedAnnouncements.length\\\">\\n              <button\\n                type=\\\"button\\\"\\n                class=\\\"btn btn-default btn-with-icon dropdown-toggle\\\"\\n                dropdownToggle\\n              >\\n                <i class=\\\"ion-md-list\\\"></i>\\n                <span>批量操作</span>\\n              </button>\\n              <ul class=\\\"dropdown-menu\\\" *dropdownMenu>\\n                <li class=\\\"dropdown-item\\\">\\n                  <a [href]=\\\"\\\" (click)=\\\"openBatchDelModal()\\\">批量删除</a>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n        </div>\\n        <form\\n          class=\\\"pull-right form-inline navbar-form announcement-search-form\\\" \\n          [formGroup]=\\\"searchForm\\\" \\n          (ngSubmit)=\\\"submitSearchForm(searchForm.value)\\\"\\n        >\\n          <div class=\\\"input-group\\\" style=\\\"margin: 0\\\">\\n            <input\\n              type=\\\"text\\\"\\n              placeholder=\\\"公告内容\\\"\\n              [formControl]=\\\"keyword\\\"\\n              class=\\\"form-control with-default-addon\\\"\\n            />\\n            <span class=\\\"input-group-btn\\\">\\n              <button class=\\\"btn btn-default\\\" type=\\\"submit\\\" [disabled]=\\\"!searchForm.valid\\\">搜索</button>\\n            </span>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"table-responsive\\\">\\n        <div class=\\\"announcement-list\\\">\\n          <sa-loading-spider [show]=\\\"fetching[Loading.List]\\\"></sa-loading-spider>\\n          <table class=\\\"table table-striped table-no-borders black-muted-bg table-enrich\\\">\\n            <thead class=\\\"thead-inverse\\\">\\n              <tr>\\n                <th class=\\\"batch-checkbox\\\">\\n                  <sa-checkbox [(ngModel)]=\\\"announcementsSelectAll\\\" (ngModelChange)=\\\"handleBatchSelectChange($event)\\\">\\n                    <span sa-checkbox-label>\\n                      <span>&nbsp;</span>\\n                      <strong>ID</strong>\\n                    </span>\\n                  </sa-checkbox>\\n                </th>\\n                <th width=\\\"50%\\\">内容</th>\\n                <th class=\\\"text-center\\\">状态</th>\\n                <th class=\\\"text-center\\\">操作</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngIf=\\\"!announcements.data.length;else dataList\\\">\\n                <td colspan=\\\"7\\\">\\n                  <p class=\\\"text-muted text-center announcement-err-msg\\\">\\n                    <span>{{ fetching[Loading.List] ? '数据请求中...' : '暂无数据' }}</span>\\n                  <p>\\n                </td>\\n              </tr>\\n              <ng-template #dataList>\\n                <tr *ngFor=\\\"let announcement of announcements.data\\\">\\n                  <td class=\\\"batch-checkbox\\\">\\n                    <sa-checkbox [(ngModel)]=\\\"announcement.selected\\\" (ngModelChange)=\\\"handleItemSelectChange()\\\">\\n                      <span sa-checkbox-label>\\n                        <span>&nbsp;</span>\\n                        <strong>{{ announcement.id }}</strong>\\n                      </span>\\n                    </sa-checkbox>\\n                  </td>\\n                  <td>\\n                    <div\\n                      class=\\\"content ql-editor\\\" \\n                      [innerHTML]=\\\"parseMarkdown(announcement.content)\\\"\\n                    ></div>\\n                  </td>\\n                  <td align=\\\"center\\\">\\n                    <span>{{ announcement.state === PublishState.Published ? '已发布' : '草稿' }}</span>\\n                    <span>&nbsp;&nbsp;</span>\\n                    <i class=\\\"ion-md-checkmark text-success\\\" *ngIf=\\\"announcement.state === PublishState.Published\\\"></i>\\n                    <i class=\\\"ion-md-create text-warning\\\" *ngIf=\\\"announcement.state === PublishState.Draft\\\"></i>\\n                  </td>\\n                  <td>\\n                    <div class=\\\"text-center\\\">\\n                      <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n                        <button\\n                          type=\\\"button\\\"\\n                          class=\\\"btn btn-sm btn-warning\\\"\\n                          (click)=\\\"editAnnouncement(announcement)\\\"\\n                        >编辑公告</button>\\n                        <button\\n                          type=\\\"button\\\"\\n                          class=\\\"btn btn-sm btn-danger\\\"\\n                          (click)=\\\"openDelModal(announcement)\\\"\\n                        >删除公告</button>\\n                      </div>\\n                    </div>\\n                  </td>\\n                </tr>\\n              </ng-template>\\n            </tbody>\\n          </table>\\n          <br>\\n          <div class=\\\"text-center\\\" *ngIf=\\\"announcements.pagination\\\">\\n            <pagination\\n              class=\\\"pagination-xs\\\"\\n              firstText=\\\"首页\\\"\\n              lastText=\\\"末页\\\"\\n              nextText=\\\"下一页\\\"\\n              previousText=\\\"上一页\\\"\\n              pageBtnClass=\\\"btn-primary\\\"\\n              [totalItems]=\\\"announcements.pagination.total\\\"\\n              [itemsPerPage]=\\\"announcements.pagination.per_page\\\"\\n              [(ngModel)]=\\\"announcements.pagination.current_page\\\"\\n              [maxSize]=\\\"7\\\"\\n              [boundaryLinks]=\\\"true\\\"\\n              [rotate]=\\\"false\\\"\\n              (pageChanged)=\\\"handlePageChanged($event)\\\"\\n            ></pagination>\\n          </div>\\n        </div>\\n      </div>\\n    </sa-card>\\n  </div>\\n  <!-- 删除确认弹窗 -->\\n  <div bsModal #delModal=\\\"bs-modal\\\" class=\\\"modal fade\\\" tabindex=\\\"1\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-dialog\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header\\\">\\n          <button class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"canceldDelModal()\\\">\\n            <span aria-hidden=\\\"true\\\">&times;</span>\\n          </button>\\n          <h4 class=\\\"modal-title\\\">确认操作</h4>\\n        </div>\\n        <div class=\\\"modal-body\\\">\\n          <div class=\\\"message\\\">\\n            <span class=\\\"icon text-warning\\\">\\n              <i class=\\\"ion-md-information-circle-outline\\\"></i>\\n            </span>\\n            <span>确定要删除{{ activeAnnouncement ? '这条' : '选中' }}公告吗？</span>\\n          </div>\\n        </div>\\n        <div class=\\\"modal-footer\\\">\\n          <button class=\\\"btn btn-primary confirm-btn\\\" (click)=\\\"(activeAnnouncement ? doDelAnnouncement() : doDelAnnouncements())\\\">确认删除</button>\\n          <span>&nbsp;&nbsp;</span>\\n          <button class=\\\"btn btn-default confirm-btn\\\" (click)=\\\"canceldDelModal()\\\">取消</button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","/**\n * @file 公告管理页面组件\n * @module app/page/annoucement/component\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport marked from 'marked';\nimport * as lodash from 'lodash';\nimport * as API_PATH from '@app/constants/api';\nimport { ModalDirective } from 'ngx-bootstrap';\nimport { Component, ViewChild, ViewEncapsulation, OnInit } from '@angular/core';\nimport { FormGroup, AbstractControl, FormBuilder, Validators } from '@angular/forms';\nimport { SaHttpRequesterService, IRequestParams } from '@app/services';\nimport { TApiPath, TSelectedIds, TSelectedAll, IResponsePaginationData, IFetching } from '@app/pages/pages.constants';\nimport { EPublishState } from '@app/constants/state';\nimport {\n  humanizedLoading,\n  mergeFormControlsToInstance,\n  handleBatchSelectChange,\n  handleItemSelectChange,\n  formControlStateClass\n} from '@/app/pages/pages.service';\n\n// 公告\ninterface IAnnouncement {\n  id?: number;\n  _id?: string;\n  state: number;\n  content: string;\n  update_at: string;\n  create_at: string;\n  selected?: boolean;\n}\n\ntype TResponseAnnouncement = IResponsePaginationData<IAnnouncement>;\nenum ELoading { List }\n\nconst DEFAULT_EDIT_FORM = {\n  content: '',\n  state: EPublishState.Published\n};\n\nconst DEFAULT_SEARCH_FORM = {\n  keyword: ''\n};\n\n@Component({\n  selector: 'page-announcement',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: ['./announcement.scss'],\n  templateUrl: './announcement.component.html'\n})\nexport class AnnouncementComponent implements OnInit {\n\n  private Loading = ELoading;\n  private PublishState = EPublishState;\n  private controlStateClass = formControlStateClass;\n  private apiPath: TApiPath = API_PATH.ANNOUNCEMENT;\n\n  @ViewChild('delModal', { static: false }) delModal: ModalDirective;\n\n  // 表单\n  public editForm: FormGroup;\n  public searchForm: FormGroup;\n  public state: AbstractControl;\n  public keyword: AbstractControl;\n  public content: AbstractControl;\n\n  // 业务\n  public activeAnnouncement: IAnnouncement = null;\n  public announcementsSelectAll: TSelectedAll = false;\n  public selectedAnnouncements: TSelectedIds = [];\n  public publishState: EPublishState = EPublishState.All;\n  public fetching: IFetching = {};\n  public announcements: TResponseAnnouncement = {\n    data: [],\n    pagination: null\n  };\n\n  constructor(private fb: FormBuilder, private httpService: SaHttpRequesterService) {\n\n    // 实例表单\n    this.editForm = this.fb.group({\n      content: [DEFAULT_EDIT_FORM.content, Validators.compose([Validators.required])],\n      state: [DEFAULT_EDIT_FORM.state, Validators.compose([Validators.required])]\n    });\n\n    this.searchForm = this.fb.group({\n      keyword: [DEFAULT_SEARCH_FORM.keyword, Validators.compose([Validators.required])]\n    });\n\n    mergeFormControlsToInstance(this, this.editForm);\n    mergeFormControlsToInstance(this, this.searchForm);\n  }\n\n  ngOnInit() {\n    marked.setOptions({\n      renderer: new marked.Renderer(),\n      gfm: true,\n      tables: true,\n      breaks: false,\n      pedantic: false,\n      sanitize: false,\n      smartLists: true,\n      smartypants: false\n    });\n    this.getAnnouncements();\n  }\n\n  // 当前数据数量\n  get currentListTotal(): number {\n    const pagination = this.announcements.pagination;\n    return pagination && pagination.total || 0;\n  }\n\n  // 解析 Markdown\n  public parseMarkdown(content: string): string {\n    return marked(content);\n  }\n\n  // 判断公告类型\n  public isState(state: EPublishState): boolean {\n    return this.publishState === state;\n  }\n\n  // 切换公告类型\n  public switchState(state: EPublishState): void {\n    if (state === this.publishState) {\n      return;\n    }\n    this.publishState = state;\n    this.getAnnouncements();\n  }\n\n  // 重置编辑表单\n  public resetEditForm(): void {\n    this.editForm.reset(DEFAULT_EDIT_FORM);\n    this.activeAnnouncement = null;\n  }\n\n  // 重置搜索\n  public resetSearchForm(): void {\n    this.searchForm.reset(DEFAULT_SEARCH_FORM);\n  }\n\n  // 修改公告\n  public editAnnouncement(announcement: IAnnouncement) {\n    this.activeAnnouncement = lodash.cloneDeep(announcement);\n    this.editForm.reset(announcement);\n  }\n\n  // 提交表单\n  public submitEditForm(announcement: IAnnouncement): void {\n    if (this.editForm.valid) {\n      this.activeAnnouncement\n        ? this.putAnnouncement(announcement)\n        : this.addAnnouncement(announcement);\n    }\n  }\n\n  // 提交搜索\n  public submitSearchForm(): void {\n    if (this.searchForm.valid) {\n      this.getAnnouncements();\n    }\n  }\n\n  // 删除公告弹窗\n  public openDelModal(announcement) {\n    this.activeAnnouncement = lodash.cloneDeep(announcement);\n    this.delModal.show();\n  }\n\n  // 删除弹窗取消\n  public canceldDelModal() {\n    this.delModal.hide();\n    this.activeAnnouncement = null;\n  }\n\n  // 批量删除公告弹窗\n  public openBatchDelModal() {\n    this.activeAnnouncement = null;\n    this.delModal.show();\n  }\n\n  // 多选切换\n  public handleBatchSelectChange(isSelect: boolean) {\n    const data = this.announcements.data;\n    const selectedIds = this.selectedAnnouncements;\n    this.selectedAnnouncements = handleBatchSelectChange({ data, selectedIds, isSelect });\n  }\n\n  // 单个切换\n  public handleItemSelectChange(): void {\n    const data = this.announcements.data;\n    const selectedIds = this.selectedAnnouncements;\n    const result = handleItemSelectChange({ data, selectedIds });\n    this.announcementsSelectAll = result.all;\n    this.selectedAnnouncements = result.selectedIds;\n  }\n\n  // 分页获取公告\n  public handlePageChanged(event: any): void {\n    this.getAnnouncements({ page: event.page });\n  }\n\n  // 刷新\n  public refreshAnnouncements(): void {\n    this.getAnnouncements({ page: this.announcements.pagination.current_page });\n  }\n\n  // 获取公告\n  public getAnnouncements(params: IRequestParams = {}): Promise<any> {\n\n    // 搜索\n    if (this.keyword.value) {\n      params.keyword = this.keyword.value;\n    }\n\n    // 非全部数据\n    if (this.publishState !== EPublishState.All) {\n      params.state = this.publishState;\n    }\n\n    return humanizedLoading(\n      this.fetching,\n      ELoading.List,\n      this.httpService\n        .get<TResponseAnnouncement>(this.apiPath, params)\n        .then(announcements => {\n          this.announcements = announcements.result;\n          this.selectedAnnouncements = [];\n          this.announcementsSelectAll = false;\n        })\n    );\n  }\n\n  // 添加公告\n  public addAnnouncement(announcement: IAnnouncement): Promise<any> {\n    return this.httpService.post<IAnnouncement>(this.apiPath, announcement)\n      .then(_ => {\n        this.resetEditForm();\n        this.refreshAnnouncements();\n      });\n  }\n\n  // 更新公告\n  public putAnnouncement(announcement: IAnnouncement): Promise<any> {\n    return this.httpService.put<IAnnouncement>(\n      `${this.apiPath}/${this.activeAnnouncement._id}`,\n      Object.assign(this.activeAnnouncement, announcement)\n    )\n    .then(_ => {\n      this.resetEditForm();\n      this.refreshAnnouncements();\n      this.activeAnnouncement = null;\n    });\n  }\n\n  // 删除公告\n  public doDelAnnouncement() {\n    this.httpService\n    .delete<IAnnouncement>(`${this.apiPath}/${this.activeAnnouncement._id}`)\n    .then(_ => {\n      this.delModal.hide();\n      this.activeAnnouncement = null;\n      this.refreshAnnouncements();\n    })\n    .catch(_ => {\n      this.delModal.hide();\n    });\n  }\n\n  // 批量删除\n  public doDelAnnouncements() {\n    this.httpService\n    .delete<any>(this.apiPath, { announcement_ids: this.selectedAnnouncements })\n    .then(_ => {\n      this.delModal.hide();\n      this.refreshAnnouncements();\n      this.selectedAnnouncements = [];\n    })\n    .catch(_ => {\n      this.delModal.hide();\n    });\n  }\n}\n","/**\n * @file 公告管理模块\n * @module app/page/annoucement/module\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PaginationModule, BsDropdownModule, ModalModule } from 'ngx-bootstrap';\nimport { SaModule } from '@/app/sa.module';\n\nimport { routing } from './announcement.routing';\nimport { AnnouncementComponent } from './announcement.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    PaginationModule.forRoot(),\n    BsDropdownModule.forRoot(),\n    ModalModule.forRoot(),\n    FormsModule,\n    SaModule,\n    routing\n  ],\n  providers: [],\n  declarations: [\n    AnnouncementComponent\n  ]\n})\nexport default class AnnouncementModule {}\n","/**\n * @file 公告管理路由\n * @module app/page/annoucement/routes\n * @author Surmon <https://github.com/surmon-china>\n */\n\nimport { Routes, RouterModule } from '@angular/router';\nimport { AnnouncementComponent } from './announcement.component';\n\nconst routes: Routes = [\n  { path: '', component: AnnouncementComponent }\n];\n\nexport const routing = RouterModule.forChild(routes);\n","module.exports = \".announcement-form .announcement-content {\\n  padding: 0;\\n}\\n.announcement-form .announcement-content > .markdown-editor > .editor-toolbar > .menus .quote,\\n.announcement-form .announcement-content > .markdown-editor > .editor-toolbar > .menus .code,\\n.announcement-form .announcement-content > .markdown-editor > .editor-toolbar > .menus .-h3,\\n.announcement-form .announcement-content > .markdown-editor > .editor-toolbar > .menus .image,\\n.announcement-form .announcement-content > .markdown-editor > .editor-toolbar > .menus .save {\\n  display: none;\\n}\\n.announcement-search-form > .input-group > .form-control {\\n  width: 16em;\\n}\\n.announcement-list {\\n  position: relative;\\n}\\n.announcement-list .batch-checkbox {\\n  text-align: left;\\n  padding-left: 2em;\\n}\\n.announcement-list .announcement-err-msg {\\n  margin: 1em 0;\\n}\\n.announcement-list tbody tr td {\\n  line-height: 5em;\\n}\\n.announcement-list tbody tr td .content {\\n  word-break: break-all;\\n  line-height: 2.6;\\n}\\n.announcement-list tbody tr td .content p {\\n  margin: 0;\\n}\\n.announcement-list tbody tr td .content img {\\n  max-width: 4em;\\n  margin: 0 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdXJtb24vUHJvamVjdHMvQmxvZy9hbmd1bGFyLWFkbWluL3NyYy9hcHAvcGFnZXMvYW5ub3VuY2VtZW50L2Fubm91bmNlbWVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9hbm5vdW5jZW1lbnQvYW5ub3VuY2VtZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUU7RUFDRSxVQUFBO0FDREo7QURTVTs7Ozs7RUFLRSxhQUFBO0FDUFo7QURtQkk7RUFDRSxXQUFBO0FDaEJOO0FEcUJBO0VBQ0Usa0JBQUE7QUNsQkY7QURvQkU7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0FDbEJKO0FEcUJFO0VBQ0UsYUFBQTtBQ25CSjtBRDBCTTtFQUNFLGdCQUFBO0FDeEJSO0FEMEJRO0VBQ0UscUJBQUE7RUFDQSxnQkFBQTtBQ3hCVjtBRDBCVTtFQUNFLFNBQUE7QUN4Qlo7QUQyQlU7RUFDRSxjQUFBO0VBQ0EsYUFBQTtBQ3pCWiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Fubm91bmNlbWVudC9hbm5vdW5jZW1lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5hbm5vdW5jZW1lbnQtZm9ybSB7XG5cbiAgLmFubm91bmNlbWVudC1jb250ZW50IHtcbiAgICBwYWRkaW5nOiAwO1xuXG4gICAgPiAubWFya2Rvd24tZWRpdG9yIHtcblxuICAgICAgPiAuZWRpdG9yLXRvb2xiYXIge1xuXG4gICAgICAgID4gLm1lbnVzIHtcblxuICAgICAgICAgIC5xdW90ZSxcbiAgICAgICAgICAuY29kZSxcbiAgICAgICAgICAuLWgzLFxuICAgICAgICAgIC5pbWFnZSxcbiAgICAgICAgICAuc2F2ZSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4uYW5ub3VuY2VtZW50LXNlYXJjaC1mb3JtIHtcblxuICA+IC5pbnB1dC1ncm91cCB7XG5cbiAgICA+IC5mb3JtLWNvbnRyb2wge1xuICAgICAgd2lkdGg6IDE2ZW07XG4gICAgfVxuICB9XG59XG5cbi5hbm5vdW5jZW1lbnQtbGlzdCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAuYmF0Y2gtY2hlY2tib3gge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgcGFkZGluZy1sZWZ0OiAyZW07XG4gIH1cblxuICAuYW5ub3VuY2VtZW50LWVyci1tc2cge1xuICAgIG1hcmdpbjogMWVtIDA7XG4gIH1cblxuICB0Ym9keSB7XG5cbiAgICB0ciB7XG5cbiAgICAgIHRkIHtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDVlbTtcblxuICAgICAgICAuY29udGVudCB7XG4gICAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsO1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyLjY7XG5cbiAgICAgICAgICBwIHtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiA0ZW07XG4gICAgICAgICAgICBtYXJnaW46IDAgMWVtO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLmFubm91bmNlbWVudC1mb3JtIC5hbm5vdW5jZW1lbnQtY29udGVudCB7XG4gIHBhZGRpbmc6IDA7XG59XG4uYW5ub3VuY2VtZW50LWZvcm0gLmFubm91bmNlbWVudC1jb250ZW50ID4gLm1hcmtkb3duLWVkaXRvciA+IC5lZGl0b3ItdG9vbGJhciA+IC5tZW51cyAucXVvdGUsXG4uYW5ub3VuY2VtZW50LWZvcm0gLmFubm91bmNlbWVudC1jb250ZW50ID4gLm1hcmtkb3duLWVkaXRvciA+IC5lZGl0b3ItdG9vbGJhciA+IC5tZW51cyAuY29kZSxcbi5hbm5vdW5jZW1lbnQtZm9ybSAuYW5ub3VuY2VtZW50LWNvbnRlbnQgPiAubWFya2Rvd24tZWRpdG9yID4gLmVkaXRvci10b29sYmFyID4gLm1lbnVzIC4taDMsXG4uYW5ub3VuY2VtZW50LWZvcm0gLmFubm91bmNlbWVudC1jb250ZW50ID4gLm1hcmtkb3duLWVkaXRvciA+IC5lZGl0b3ItdG9vbGJhciA+IC5tZW51cyAuaW1hZ2UsXG4uYW5ub3VuY2VtZW50LWZvcm0gLmFubm91bmNlbWVudC1jb250ZW50ID4gLm1hcmtkb3duLWVkaXRvciA+IC5lZGl0b3ItdG9vbGJhciA+IC5tZW51cyAuc2F2ZSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5hbm5vdW5jZW1lbnQtc2VhcmNoLWZvcm0gPiAuaW5wdXQtZ3JvdXAgPiAuZm9ybS1jb250cm9sIHtcbiAgd2lkdGg6IDE2ZW07XG59XG5cbi5hbm5vdW5jZW1lbnQtbGlzdCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5hbm5vdW5jZW1lbnQtbGlzdCAuYmF0Y2gtY2hlY2tib3gge1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBwYWRkaW5nLWxlZnQ6IDJlbTtcbn1cbi5hbm5vdW5jZW1lbnQtbGlzdCAuYW5ub3VuY2VtZW50LWVyci1tc2cge1xuICBtYXJnaW46IDFlbSAwO1xufVxuLmFubm91bmNlbWVudC1saXN0IHRib2R5IHRyIHRkIHtcbiAgbGluZS1oZWlnaHQ6IDVlbTtcbn1cbi5hbm5vdW5jZW1lbnQtbGlzdCB0Ym9keSB0ciB0ZCAuY29udGVudCB7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgbGluZS1oZWlnaHQ6IDIuNjtcbn1cbi5hbm5vdW5jZW1lbnQtbGlzdCB0Ym9keSB0ciB0ZCAuY29udGVudCBwIHtcbiAgbWFyZ2luOiAwO1xufVxuLmFubm91bmNlbWVudC1saXN0IHRib2R5IHRyIHRkIC5jb250ZW50IGltZyB7XG4gIG1heC13aWR0aDogNGVtO1xuICBtYXJnaW46IDAgMWVtO1xufSJdfQ== */\""],"sourceRoot":""}